/*! eqlytics 2014-08-05 */
!function(a){"use strict";a.module("eqlytics",[]).service("eqlytics",function(){this.identify=function(){window.analytics.identify.apply(this,arguments)},this.track=function(){window.analytics.track.apply(this,arguments)},this.pageview=function(){1===arguments.length&&"string"==typeof arguments[0]&&(arguments[0]={path:arguments[0]}),window.analytics.page.apply(this,arguments)},this.alias=function(){window.analytics.alias.apply(this,arguments)},this.mute=function(){this.identify=this.track=this.pageview=this.alias=function(){}},this.logOnly=function(){var b=function(b){try{return a.toJson(b)}catch(c){return console.warn("[eqlytics] Could not transform arguments to JSON, logging as objects instead."),b}},c=function(a){return function(){var c=Array.prototype.slice.call(arguments,0,arguments.length);console.log("[eqlytics]",a,b(c))}};this.identify=c("identify"),this.track=c("track"),this.pageview=c("pageview"),this.alias=c("alias")}}).run(["$rootScope","eqlytics",function(a,b){a.$on("$routeChangeSuccess",function(a,c){c&&(c.$$route||c).redirectTo||b.pageview(window.location.pathname+window.location.hash)})}]).directive("analyticsOn",["eqlytics",function(b){function c(a){return a.id||a.name||a.tagName}function d(a){return"analytics"===a.substr(0,9)&&-1===["on","event"].indexOf(a.substr(10))}return{restrict:"A",scope:!1,link:function(e,f,g){var h=f.attr("analytics-on")||"click";f.bind(h,function(){var e=f.attr("analytics-event")||c(f),h={};a.forEach(g.$attr,function(a,b){if(d(a)){var c=f.attr(a);h[b.slice(9).toLowerCase()]=c}}),b.track(e,h)})}}}])}(window.angular);